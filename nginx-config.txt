server {
    listen 80;
    listen [::]:80;

    server_name ~^(?<subdomain>.+)\.zattona\.com zattona.com;


    location /api {
          proxy_pass    http://localhost:8083;
          proxy_set_header    Host               $host;
          proxy_set_header    X-Real-IP          $remote_addr;
          proxy_set_header    X-Forwarded-For    $proxy_add_x_forwarded_for;
          proxy_set_header    X-Forwarded-Host   $host;
          proxy_set_header    X-Forwarded-Server $host;
          proxy_set_header    X-Forwarded-Port   $server_port;
          proxy_set_header    X-Forwarded-Proto  $scheme;        
    }

     location /swagger {
          proxy_pass    http://localhost:8083/swagger-ui.html;
          proxy_set_header    Host               $host;
          proxy_set_header    X-Real-IP          $remote_addr;
          proxy_set_header    X-Forwarded-For    $proxy_add_x_forwarded_for;
          proxy_set_header    X-Forwarded-Host   $host;
          proxy_set_header    X-Forwarded-Server $host;
          proxy_set_header    X-Forwarded-Port   $server_port;
          proxy_set_header    X-Forwarded-Proto  $scheme;        
    }

    location /{
            proxy_pass http://localhost:8082;
            proxy_http_version 1.1;
            proxy_set_header Upgrade $http_upgrade;
            proxy_set_header connection "upgrade";
            proxy_set_header X-Custom-Referrer $subdomain;
    }
}

// sudo nano /etc/nginx/sites-available/zattona.com
// sudo ln -s /etc/nginx/sites-available/zattona.com /etc/nginx/sites-enabled/
// sudo nginx -t
// sudo systemctl restart nginx